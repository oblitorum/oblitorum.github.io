{"version":"https://jsonfeed.org/version/1","title":"Home on Jason Ng","home_page_url":"https://oblitorum.github.io/","feed_url":"https://oblitorum.github.io/index.json","description":"Recent content in Home on Jason Ng","favicon":"https://oblitorum.github.io/assets/icon.png","icon":"https://oblitorum.github.io/assets/icon.png","author":{"name":"John Dodo"},"items":[{"content_html":"\u003cp\u003eOn version \u0026gt;= 1.12, Golang changes its way to handle HTTP request when you serve with ListenAndServeTLS method. The difference is shown on below image, which is taken from this \u003ca href=\"https://github.com/golang/go/compare/go1.11.13...golang:go1.12\"\u003elink\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/be-aware-of-how-listenandservetls-handles-http-request-on-golang-net-http-package-1.png\" alt=\"golang 1.11.13 and 1.12 diff image\"\u003e\u003c/p\u003e\n\u003cp\u003eAs we can see, on version \u0026lt; 1.12, it just returns without writing anything in response, which makes a \u0026lsquo;malformed HTTP response\u0026rsquo; error when you use Get or Client.Do with net/http package. And on version \u0026gt;= 1.12, it will return an 400 response with \u0026lsquo;Client sent an HTTP request to an HTTPS server.\u0026rsquo; message.\u003c/p\u003e\n\u003cp\u003eSome third-party packages haven\u0026rsquo;t noticed this difference yet, they may use \u0026lsquo;malformed HTTP response\u0026rsquo; error to check if server setup TLS or not. For example, \u003ca href=\"https://github.com/percona/pmm-client/blob/cd42b1da19df0a278302a74d475db1e8e1fe0cb1/pmm/check_network.go#L365\"\u003ethis one\u003c/a\u003e uses this way, it will cause a problem if the server is built with Golang version \u0026gt;= 1.12.\u003c/p\u003e\n","date_modified":"2022-04-04T17:53:38+08:00","date_published":"2022-04-04T17:53:38+08:00","id":"https://oblitorum.github.io/articles/be-aware-of-how-listenandservetls-handles-http-request-on-golang-net-http-package/","summary":"On version \u0026gt;= 1.12, Golang changes its way to handle HTTP request when you serve with ListenAndServeTLS method.","tags":["Golang"],"title":"Be Aware of How ListenAndServeTLS Handles Http Request on Golang net/http Package","url":"https://oblitorum.github.io/articles/be-aware-of-how-listenandservetls-handles-http-request-on-golang-net-http-package/"}]}